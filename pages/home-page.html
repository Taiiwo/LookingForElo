<link rel="import" href="../components/eric/eric-projects.html">
<dom-module id="home-page">
    <template>
        <style>
            #add {
                position: fixed;
                bottom: 20px;
                right: 20px;
            }
        </style>
        <div class="container">
            <div class="fixed-action-btn">
                <a class="btn-floating btn-large red waves-effect waves-light">
                    <i class="large material-icons">mode_edit</i>
                </a>
                <ul>
                    <li><a class="btn-floating red waves-effect waves-light"><i class="material-icons">insert_chart</i></a></li>
                    <li><a class="btn-floating yellow darken-1 waves-effect waves-light"><i class="material-icons">format_quote</i></a></li>
                    <li><a class="btn-floating green waves-effect waves-light"><i class="material-icons">publish</i></a></li>
                    <li><a class="btn-floating blue waves-effect waves-light"><i class="material-icons">attach_file</i></a></li>
                </ul>
            </div>
            <div id="headContent">
### Looking for Elo?
Simply enter the usernames of you and your current team(If any), then enter the credentials desired for your team.
Once your team has been assembled, you will be placed into a Google+ Hangout. Have fun!
            </div>
            <ul id="team" class="collection"></ul>
        </div>
    </template>
</dom-module>
<script>
    Polymer({
        is: "home-page",
        attached: function() {
            // markup the markdown
            site.markdown('#headContent');

            // creates the markup for a single player
            function player(i){
                return $('<li/>')
                    .addClass("collection-item")
                    .append($('<div/>')
                        .addClass('row')
                        .append($('<i/>')
                            .addClass('material-icons col s1')
                            .text("face")
                        )
                        .append($('<div/>')
                            .addClass("input-field col s3")
                            .append($("<input/>")
                                .attr("id", "username" + i)
                                .attr("type", "text")
                                .addClass("validate")
                            )
                            .append($('<label/>')
                                .addClass("active")
                                .attr("for", "username" + i)
                                .text("Username")
                            )
                        )
                        .append($('<div/>')
                            .addClass("col s6")
                            .append(dropdown(i, "role", "Role ▼", [
                                "Top", "Jungle",
                                "Mid",
                                "ADC", "Support"
                            ]))
                        )
                    )
                ;
            }
            // returns the markup for a dropdown menu
            function dropdown(i, id, text, values){
                var dropdown = $('<a/>')
                    .addClass("dropdown-button btn")
                    .attr("data-activates", id + i)
                    .text(text) // Role ▼

                var options = $('<ul/>')
                    .attr('id', "roles" + i)
                    .addClass("dropdown-content")

                for (var index in values){
                    var value = values[index];
                    options.append($('<li/>')
                        .append($('<span/>')
                            .attr("value", index)
                            .text(value)
                        )
                    )
                }
                return [dropdown, options];
            }
            for (var i = 0; i < 5; i++){
                $('#team').append(player(i));
            }
            $('.dropdown-button').dropdown({});
            $('.dropdown-content > li').click( function(){
                // holy javascript, batman
                $(this).parent().parent().children('a').text($(this).children("span").text());
            });

            $('#textboxId').keydown(function (event) {
                var keypressed = event.keyCode || event.which;
                if (keypressed == 13) {
                    $(this).closest('form').submit();
                }
            });
        }
    });
</script>
